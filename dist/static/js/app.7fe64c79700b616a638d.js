webpackJsonp([1],{"1/oy":function(e,o){},"9M+g":function(e,o){},Id91:function(e,o){},Jmt5:function(e,o){},NHnr:function(e,o,r){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var t=r("/5sW"),n=r("e6fC"),a=(r("Jmt5"),r("9M+g"),r("mvHQ")),l=r.n(a),c=r("mtWM"),i=r.n(c),s={data:function(){return{form:{editable:!0,cep:"",error:"",endereco:{logradouro:"",bairro:"",localidade:"",uf:"",numero:"",complemento:"",distancia:""}},ceps:this.$ceps,show:!0,currentLocation:{lat:0,lng:0},locationLoaded:!1,loading:!1}},computed:{isValid:function(){return""!=this.form.cep&&""!=this.form.endereco.logradouro&&""!=this.form.endereco.bairro&&""!=this.form.endereco.localidade&&""!=this.form.endereco.uf}},methods:{initCurrentLocation:function(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(this.setCurrentLocation)},setCurrentLocation:function(e){this.currentLocation.lat=e.coords.latitude,this.currentLocation.lng=e.coords.longitude,this.locationLoaded=!0,this.$forceUpdate()},getCEP:function(){console.log(this.$ceps);var e=this,o="https://viacep.com.br/ws/"+e.form.cep+"/json";/^([0-9]{5})(-?)([0-9]{3})$/.test(e.form.cep)?(/^( [0-9]{8})$/.test(e.form.cep)&&(e.form.cep=e.form.cep.substr(0,5)+"-"+e.form.cep.substr(5,8)),i.a.get(o).then(function(o){var r=o.data;e.form.error="",e.form.editable=!1,e.form.endereco=r,e.form.endereco.numero="",e.form.endereco.complemento="",e.form.endereco.distancia="",e.$refs.numero.$el.focus(),r.erro&&(e.form.error="CEP não encontrado",e.form.editable=!0,e.form.result="",e.$refs.logradouro.$el.focus())})):e.form.editable=!0},cleanFields:function(){this.form.editable=!0,this.form.cep="",this.form.endereco.logradouro="",this.form.endereco.numero="",this.form.endereco.complemento="",this.form.endereco.bairro="",this.form.endereco.localidade="",this.form.endereco.uf="",this.form.endereco.distancia=""},onSubmit:function(e){e.preventDefault(),this.refreshCeps(this.form.endereco,this.form.cep)},refreshCeps:function(e,o){e.distancia=this.getDistance(this.form.endereco.logradouro+","+this.form.endereco.numero+"-"+this.form.endereco.bairro+","+this.form.endereco.localidade),this.$ceps.push(e),localStorage.setItem("cepss",l()(this.$ceps)),this.cleanFields()},getDistance:function(e){if(this.locationLoaded){var o=new google.maps.Geocoder,r=new google.maps.LatLng({lat:this.currentLocation.lat,lng:this.currentLocation.lng});o.geocode({address:e},function(o,t){if(console.log(o),console.log(e),"OK"==t){var n=o[0].geometry.location,a=google.maps.geometry.spherical.computeDistanceBetween(r,n);return a>0&&(a/=10),console.log(a),"- Distancia: "+a+"km"}})}}},watch:{ceps:function(e){this.ceps=this.$ceps}},mounted:function(){this.initCurrentLocation()}},m={render:function(){var e=this,o=e.$createElement,r=e._self._c||o;return r("div",[e.show?r("b-form",{on:{submit:e.onSubmit}},[r("b-container",{staticClass:"bv-example-row"},[r("b-row",[r("b-col",[r("p",[e._v("Cadastro de CEP")])])],1),e._v(" "),r("b-row",[r("b-col",[r("b-form-group",{attrs:{id:"exampleInputGroup1",label:"CEP:","label-for":"exampleInput1",description:""}},[r("b-form-input",{attrs:{id:"exampleInput1",type:"text",maxlength:"9",autocomplete:"off",placeholder:"ex: 99999-999"},on:{change:e.getCEP,keyup:e.getCEP,keydown:e.getCEP,keypress:e.getCEP,blur:e.getCEP},model:{value:e.form.cep,callback:function(o){e.$set(e.form,"cep",o)},expression:"form.cep"}})],1)],1),e._v(" "),r("b-col",[r("span",{staticClass:"error"},[e._v(e._s(e.form.error))])]),e._v(" "),r("b-col")],1),e._v(" "),r("b-row",[r("b-col",{attrs:{cols:"5"}},[r("b-form-group",{attrs:{id:"exampleInputGroup2",label:"Logradouro:","label-for":"exampleInput2"}},[r("b-form-input",{ref:"logradouro",attrs:{id:"exampleInput2",type:"text",readonly:!e.form.editable},model:{value:e.form.endereco.logradouro,callback:function(o){e.$set(e.form.endereco,"logradouro",o)},expression:"form.endereco.logradouro"}})],1)],1),e._v(" "),r("b-col",[r("b-form-group",{attrs:{id:"exampleInputGroup3",label:"Número:","label-for":"exampleInput3"}},[r("b-form-input",{ref:"numero",attrs:{id:"exampleInput3",type:"text"},model:{value:e.form.endereco.numero,callback:function(o){e.$set(e.form.endereco,"numero",o)},expression:"form.endereco.numero"}})],1)],1),e._v(" "),r("b-col",{attrs:{cols:"5"}},[r("b-form-group",{attrs:{id:"exampleInputGroup4",label:"Complemento:","label-for":"exampleInput4"}},[r("b-form-input",{ref:"Complemento",attrs:{id:"exampleInput4",type:"text"},model:{value:e.form.endereco.complemento,callback:function(o){e.$set(e.form.endereco,"complemento",o)},expression:"form.endereco.complemento"}})],1)],1)],1),e._v(" "),r("b-row",[r("b-col",{attrs:{cols:"5"}},[r("b-form-group",{attrs:{id:"exampleInputGroup5",label:"Bairro:","label-for":"exampleInput5"}},[r("b-form-input",{ref:"bairro",attrs:{id:"exampleInput5",type:"text",readonly:!e.form.editable},model:{value:e.form.endereco.bairro,callback:function(o){e.$set(e.form.endereco,"bairro",o)},expression:"form.endereco.bairro"}})],1)],1),e._v(" "),r("b-col",{attrs:{cols:"5"}},[r("b-form-group",{attrs:{id:"exampleInputGroup6",label:"Cidade:","label-for":"exampleInput6"}},[r("b-form-input",{ref:"localidade",attrs:{id:"exampleInput6",type:"text",readonly:!e.form.editable},model:{value:e.form.endereco.localidade,callback:function(o){e.$set(e.form.endereco,"localidade",o)},expression:"form.endereco.localidade"}})],1)],1),e._v(" "),r("b-col",[r("b-form-group",{attrs:{id:"exampleInputGroup7",label:"Estado:","label-for":"exampleInput7"}},[r("b-form-input",{ref:"uf",attrs:{id:"exampleInput7",type:"text",readonly:!e.form.editable},model:{value:e.form.endereco.uf,callback:function(o){e.$set(e.form.endereco,"uf",o)},expression:"form.endereco.uf"}})],1)],1)],1),e._v(" "),r("b-button",{attrs:{type:"submit",disabled:!e.isValid,variant:"primary"}},[e._v("Avançar")]),e._v(" "),r("b-button",{attrs:{type:"reset",variant:"danger"}},[e._v("Resetar")])],1)],1):e._e(),e._v(" "),r("b-container",{staticClass:"bv-example-row"},[r("b-row",[r("b-col",[r("ul",{staticClass:"list",attrs:{id:"example-1"}},e._l(e.ceps,function(o){return r("li",[e._v("\n              "+e._s(o.logradouro)+", "+e._s(o.numero)+" "+e._s(o.complemento)+" - "+e._s(o.bairro)+", "+e._s(o.localidade)+"/"+e._s(o.uf)+". CEP: "+e._s(o.cep)+" \n              "),e.locationLoaded?r("span",[r("span",[e._v(e._s(o.distancia))]),e._v("\n                - "),r("a",{attrs:{href:"https://www.google.com/maps/dir/"+e.currentLocation.lat+","+e.currentLocation.lng+"/"+o.logradouro+","+o.numero+"-"+o.bairro+","+o.localidade+"/?&travelmode=driving",target:"_blank"}},[e._v("Rota")])]):e._e()])}))])],1)],1)],1)},staticRenderFns:[]};var d={name:"App",components:{Form:r("VU/8")(s,m,!1,function(e){r("sMPc")},null,null).exports}},u={render:function(){var e=this.$createElement,o=this._self._c||e;return o("div",{attrs:{id:"app"}},[o("Form")],1)},staticRenderFns:[]};var p=r("VU/8")(d,u,!1,function(e){r("WEo4")},null,null).exports;t.a.use(n.a);var f=localStorage.getItem("cepss");(null==f||"string"==typeof f&&!f.length)&&(f="[]"),t.a.prototype.$ceps=JSON.parse(f),new t.a({el:"#app",render:function(e){return e(p)}})},WEo4:function(e,o){},sMPc:function(e,o){},zj2Q:function(e,o){}},["NHnr"]);
//# sourceMappingURL=app.7fe64c79700b616a638d.js.map